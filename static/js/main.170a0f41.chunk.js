(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports={menu:"Nav-menu_menu__3L28Q",item:"Nav-menu_item__TRmzC",text:"Nav-menu_text__1moLw",active:"Nav-menu_active__pE0EZ",textMod:"Nav-menu_textMod__2ZIPV",friendsList:"Nav-menu_friendsList__Ay-Gm"}},12:function(e,t,a){e.exports={infoImage:"ProfileInfo_infoImage__2MYjA",info:"ProfileInfo_info__2Z1a8",profileInfo:"ProfileInfo_profileInfo__2qPLI",profileHeader:"ProfileInfo_profileHeader__1lNVn",workT:"ProfileInfo_workT__1aHeN",workF:"ProfileInfo_workF__T4LLt",wrapper_description:"ProfileInfo_wrapper_description__24rTc",description:"ProfileInfo_description__21j6x",links:"ProfileInfo_links__3gErd",items:"ProfileInfo_items__2gy0w",twit:"ProfileInfo_twit__1ZaXs",git:"ProfileInfo_git__3xjB-",inst:"ProfileInfo_inst__30u4d"}},131:function(e,t,a){e.exports={music:"Music_music__3aRuc"}},132:function(e,t,a){},133:function(e,t,a){e.exports={dialogsItem:"DialogItem_dialogsItem__2l9oA"}},135:function(e,t,a){e.exports={messagesItem:"Message_messagesItem__1dEDk"}},138:function(e,t,a){e.exports={name:"FriendsList_name__1BPJ0"}},139:function(e,t,a){},141:function(e,t,a){e.exports=a.p+"static/media/preloader.126d0665.svg"},142:function(e,t,a){e.exports={preloader:"Preloader_preloader__2kiYz"}},143:function(e,t,a){e.exports={profileWall:"Profile_profileWall__2HIIM"}},170:function(e,t,a){e.exports=a(297)},175:function(e,t,a){},176:function(e,t,a){},20:function(e,t,a){e.exports={usersContainer:"Users_usersContainer__1Zald",ava:"Users_ava__1MOW0",name:"Users_name__3DncU",btn:"Users_btn__3cGDy",btnFoll:"Users_btnFoll__261Tm",btnUfoll:"Users_btnUfoll__25T7v",usersList:"Users_usersList__1kpCl"}},22:function(e,t,a){e.exports={login:"Login_login__KI_eC",login__wrapper:"Login_login__wrapper__1AK6g",header:"Login_header__2hL0z",inputs__item:"Login_inputs__item__3akre",inputs__dlc:"Login_inputs__dlc__2ufvb",check__text:"Login_check__text__1ZUyN",btn__block:"Login_btn__block__2hTaf",formError:"Login_formError__EH2pB"}},297:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),i=a(70),o=a.n(i),c=a(26),l=a(27),u=a(29),m=a(28),f=a(30),d=a(36),p=(a(175),a(176),a(131)),_=a.n(p),g=function(){return s.a.createElement("div",{className:_.a.music},"Not yet available :(")},E=(a(132),a(76)),h=a(11),b={messagesData:[{id:1,message:"Hi"},{id:3,message:"Yop"},{id:4,message:"kek"},{id:6,message:"pipi"},{id:7,message:"piupiu"}],dialogsData:[{id:1,name:"Anna"},{id:2,name:"Boris"},{id:3,name:"Dasha"},{id:4,name:"Robert"},{id:5,name:"Sasha"},{id:6,name:"Sveta"},{id:7,name:"Valera"}]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-NEW-MESSAGE":return Object(h.a)({},e,{messagesData:[].concat(Object(E.a)(e.messagesData),[{id:8,message:t.message}])});default:return e}},N=a(39),w=a.n(N),P=a(133),O=a.n(P),S=a(9),k=function(e){var t="/dialogs/".concat(e.id);return s.a.createElement("div",{className:O.a.dialogsItem},s.a.createElement(S.b,{to:t},e.name))},j=a(135),I=a.n(j),y=function(e){return s.a.createElement("div",{className:I.a.messagesItem},e.message)},x=a(128),L=a(129),C=Object(L.a)({form:"message"})(function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",{className:w.a.text},s.a.createElement(x.a,{name:"message",component:"input",type:"text",placeholder:"Type your message..."})),s.a.createElement("button",{className:w.a.btnMessage},"Send"))}),T=function(e){var t=e.dialogsPage,a=t.dialogsData.map(function(e){return s.a.createElement(k,{id:e.id,name:e.name,key:e.id})}),n=t.messagesData.map(function(e){return s.a.createElement(y,{id:e.id,message:e.message,key:e.id})});return s.a.createElement("div",{className:w.a.dialogs},s.a.createElement("div",{className:w.a.dialogsList},a),s.a.createElement("div",{className:w.a.messages},s.a.createElement("div",{className:w.a.messageList},n),s.a.createElement(C,{state:t,onSubmit:function(t){e.sendMessage(t.message)}})))},D=a(8),F=function(e){return{isAuth:e.auth.isAuth}},U=function(e){var t=function(t){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(f.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){return this.props.isAuth?s.a.createElement(e,this.props):s.a.createElement(d.a,{to:"/Login"})}}]),a}(s.a.Component);return Object(D.b)(F)(t)},A=a(6),M=Object(A.d)(Object(D.b)(function(e){return{dialogsPage:e.dialogsPage}},function(e){return{sendMessage:function(t){e(function(e){return{type:"ADD-NEW-MESSAGE",message:e}}(t))}}}),U)(T),R=a(10),z=a.n(R),G=a(138),H=a.n(G),B=function(e){return s.a.createElement("div",{className:H.a.name},e.name)},W=function(e){var t=e.friendsList.map(function(e){return s.a.createElement(B,{name:e.name,key:e.id,id:e.id})});return s.a.createElement("nav",{className:z.a.menu},s.a.createElement("ul",{className:z.a.listItem},s.a.createElement("li",{className:z.a.item},s.a.createElement(S.b,{to:"/Profile",className:z.a.text,activeClassName:z.a.active},"Profile")),s.a.createElement("li",{className:z.a.item},s.a.createElement(S.b,{to:"/Dialogs",className:z.a.text,activeClassName:z.a.active},"Messages")),s.a.createElement("li",{className:z.a.item},s.a.createElement(S.b,{to:"/News",className:z.a.text,activeClassName:z.a.active},"News")),s.a.createElement("li",{className:z.a.item},s.a.createElement(S.b,{to:"/Music",className:z.a.text,activeClassName:z.a.active},"Music")),s.a.createElement("li",{className:z.a.item},s.a.createElement(S.b,{to:"/Settings",className:z.a.text,activeClassName:z.a.active},"Settings")),s.a.createElement("li",{className:z.a.item},s.a.createElement(S.b,{to:"/Friends",className:"".concat(z.a.text," ").concat(z.a.textMod),activeClassName:z.a.active},"Friends"),s.a.createElement("div",{className:z.a.friendsList},t))))},Z=Object(D.b)(function(e){return{friendsList:e.navBar.friendsData}})(W),J=a(139),K=a.n(J),q=a(58),V=a(59),Y=a.n(V),Q=function(e){var t=e.followed,a=Object(q.a)(e,["followed"]);return t?s.a.createElement("div",{className:Y.a.friendsItem},s.a.createElement("div",{className:Y.a.img},s.a.createElement("img",{src:"http://www.sclance.com/pngs/avatar-icon-png/avatar_icon_png_71054.png",alt:"avatar"})),s.a.createElement("div",{className:Y.a.textBlock},s.a.createElement("div",{className:Y.a.name,id:a.id},a.name),s.a.createElement(S.b,{to:"/Dialogs"},"Write message..."))):null},X=a(60),$=a.n(X),ee=function(e){return s.a.createElement("div",{className:$.a.friendsBar},s.a.createElement("div",{className:$.a.online},s.a.createElement("p",null,"Friends online : ",s.a.createElement("span",null,"0"))),s.a.createElement("div",{className:$.a.search},s.a.createElement(S.b,{to:"/Users"}," ",s.a.createElement("button",{className:$.a.btn},"Find users"))))},te=function(e){var t=e.friendsList.map(function(e){return s.a.createElement(Q,{name:e.name,id:e.id,key:e.id,followed:e.followed})});return s.a.createElement("div",{className:K.a.friendsPage},s.a.createElement(ee,null),t)},ae=a(14),ne=a.n(ae),re=a(31),se=a(140).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"209e1589-c8e1-4114-9e39-f42219060211"}}),ie={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return se.get("users?count=".concat(e,"&&page=").concat(t)).then(function(e){return e.data})},followUsers:function(e){return se.post("follow/".concat(e)).then(function(e){return e.data})},unfollowUsers:function(e){return se.delete("follow/".concat(e)).then(function(e){return e.data})}},oe=function(e){return se.get("profile/".concat(e)).then(function(e){return e.data})},ce=function(e){return se.get("profile/status/".concat(e)).then(function(e){return e.data})},le=function(e){return se.put("profile/status",{status:e}).then(function(e){return e.data})},ue=function(){return se.get("auth/me").then(function(e){return e.data})},me=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return se.post("auth/login",{email:e,password:t,rememberMe:a}).then(function(e){return e.data})},fe=function(){return se.delete("auth/login").then(function(e){return e.data})},de=function(){return se.get("users?count=100").then(function(e){return e.data})},pe={friendsList:[]},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FRIENDS":return Object(h.a)({},e,{friendsList:t.friendsList});default:return e}},ge=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.addFriends()}},{key:"render",value:function(){return s.a.createElement(te,this.props)}}]),t}(s.a.Component),Ee=Object(A.d)(U,Object(D.b)(function(e){return{friendsList:e.friendsPage.friendsList}},{addFriends:function(){return function(){var e=Object(re.a)(ne.a.mark(function e(t){var a;return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:a=e.sent,t({type:"SET_FRIENDS",friendsList:a.items});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}))(ge),he=function(e,t,a,n){return e.map(function(e){return e[a]===t?Object(h.a)({},e,n):e})},be={usersData:[],pageSize:8,totalCount:1,currentPage:1,isFetching:!1,followingInProgress:[]},ve=function(e){return{type:"FOLLOW",userId:e}},Ne=function(e){return{type:"UNFOLLOW",userId:e}},we=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},Pe=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},Oe=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,id:t}},Se=function(){var e=Object(re.a)(ne.a.mark(function e(t,a,n,r){return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:0===e.sent.resultCode&&t(r(a)),t(Oe(!1,a));case 5:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(h.a)({},e,{usersData:he(e.usersData,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(h.a)({},e,{usersData:he(e.usersData,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(h.a)({},e,{usersData:t.usersData});case"SET_CURRENT_PAGE":return Object(h.a)({},e,{currentPage:t.currentPage});case"SET_USERS_TOTAL_COUNT":return Object(h.a)({},e,{totalCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(h.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(h.a)({},e,{followingInProgress:t.isFetching?[e.followingInProgress,t.id]:e.followingInProgress.filter(function(e){return e!==t.id})});default:return e}},je=a(20),Ie=a.n(je),ye=a(75),xe=a.n(ye),Le=function(e){var t=e.user,a=e.followingInProgress,n=e.unfollow,r=e.follow;return s.a.createElement("div",null,s.a.createElement("div",{className:Ie.a.usersList,id:t.id,key:t.id},s.a.createElement(S.b,{to:"/Profile/"+t.id},s.a.createElement("img",{src:null!=t.photos.small?t.photos.small:xe.a,alt:"avatar",className:Ie.a.ava})),s.a.createElement("div",{className:Ie.a.wrapper},s.a.createElement("div",{className:Ie.a.info},s.a.createElement("div",{className:Ie.a.name},t.name)),s.a.createElement("div",null,t.followed?s.a.createElement("button",{disabled:a.some(function(e){return e===t.id}),className:"".concat(Ie.a.btn," ").concat(Ie.a.btnUfoll),onClick:function(){n(t.id)}},"Unfollow"):s.a.createElement("button",{disabled:a.some(function(e){return e===t.id}),className:"".concat(Ie.a.btn," ").concat(Ie.a.btnFoll),onClick:function(){r(t.id)}},"Follow")))))},Ce=a(57),Te=a(40),De=a.n(Te),Fe=function(e){for(var t=e.totalCount,a=e.pageSize,n=e.currentPage,i=e.onPageChanged,o=e.portionSize,c=void 0===o?5:o,l=Math.ceil(t/a),u=[],m=1;m<=l;m++)u.push(m);var f=Math.ceil(l/c),d=Object(r.useState)(1),p=Object(Ce.a)(d,2),_=p[0],g=p[1],E=(_-1)*c+1,h=_*c;return s.a.createElement("div",{className:De.a.paginator},_>2&&s.a.createElement("button",{className:De.a.btn,onClick:function(){return g(_=1)}},"Start"),_>1&&s.a.createElement("button",{className:De.a.btn,onClick:function(){return g(_-1)}},"Prev"),u.filter(function(e){return e>=E&&e<=h}).map(function(e){return s.a.createElement("div",null,s.a.createElement("span",{className:n===e&&De.a.selectedPage,onClick:function(){i(e)}},e))}),f>_&&s.a.createElement("button",{className:De.a.btn,onClick:function(){return g(_+1)}},"Next"),f>_+1&&s.a.createElement("button",{className:De.a.btn,onClick:function(){return g(_=f)}},"End"))},Ue=function(e){var t=e.usersPage,a=e.followingInProgress,n=e.follow,r=e.unfollow,i=e.currentPage,o=e.onPageChanged,c=e.pageSize,l=e.totalCount,u=t.map(function(e){return s.a.createElement(Le,{user:e,followingInProgress:a,unfollow:r,follow:n})});return s.a.createElement("div",null,s.a.createElement(Fe,{currentPage:i,onPageChanged:o,pageSize:c,totalCount:l}),s.a.createElement("div",{className:Ie.a.usersContainer},u))},Ae=a(141),Me=a.n(Ae),Re=a(142),ze=a.n(Re),Ge=function(e){return s.a.createElement("div",{className:ze.a.preloader},s.a.createElement("img",{src:Me.a,alt:"Loading..."}))},He=function(e){return e.usersPage.usersData},Be=function(e){return e.usersPage.pageSize},We=function(e){return e.usersPage.totalCount},Ze=function(e){return e.usersPage.currentPage},Je=function(e){return e.usersPage.isFetching},Ke=function(e){return e.usersPage.followingInProgress},qe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){a.props.getUsers(a.props.pageSize,e)},a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.pageSize,this.props.currentPage)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.props.isFetching?s.a.createElement(Ge,null):null,s.a.createElement(Ue,{currentPage:this.props.currentPage,totalCount:this.props.totalCount,pageSize:this.props.pageSize,usersPage:this.props.usersPage,onPageChanged:this.onPageChanged,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress}))}}]),t}(s.a.Component),Ve=Object(D.b)(function(e){return{usersPage:He(e),pageSize:Be(e),totalCount:We(e),currentPage:Ze(e),isFetching:Je(e),followingInProgress:Ke(e)}},{follow:function(e){return function(t){Se(t,e,ie.followUsers.bind(ie),ve)}},unfollow:function(e){return function(t){Se(t,e,ie.unfollowUsers.bind(ie),Ne)}},setCurrentPage:we,toggleFollowingProgress:Oe,getUsers:function(e,t){return function(){var a=Object(re.a)(ne.a.mark(function a(n){var r;return ne.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(Pe(!0)),n(we(t)),a.next=4,ie.getUsers(e,t);case 4:r=a.sent,n(Pe(!1)),n({type:"SET_USERS",usersData:r.items}),n({type:"SET_USERS_TOTAL_COUNT",totalCount:r.totalCount});case 8:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}})(qe),Ye=a(12),Qe=a.n(Ye),Xe=function(e){var t=Object(r.useState)(!1),a=Object(Ce.a)(t,2),n=a[0],i=a[1],o=Object(r.useState)(e.status),c=Object(Ce.a)(o,2),l=c[0],u=c[1];Object(r.useEffect)(function(){u(e.status)},[e.status]);return s.a.createElement("div",null,!n&&s.a.createElement("div",null,s.a.createElement("span",{onDoubleClick:function(){i(!0)}},e.status||"No status")),n&&s.a.createElement("div",null,s.a.createElement("input",{type:"text",autoFocus:!0,onBlur:function(){i(!1),e.updateStatus(l)},value:l,onChange:function(e){u(e.currentTarget.value)}})))},$e=function(e){return e.profile?s.a.createElement("div",null,s.a.createElement("div",{className:Qe.a.info},s.a.createElement("div",{className:Qe.a.infoImage},s.a.createElement("img",{src:null!=e.profile.photos.large?e.profile.photos.large:xe.a,alt:""})),s.a.createElement("div",{className:Qe.a.profileInfo},s.a.createElement("h3",{className:Qe.a.profileHeader},e.profile.fullName),s.a.createElement(Xe,{status:e.status,updateStatus:e.updateStatus}),e.profile.lookingForAJob?s.a.createElement("div",{className:Qe.a.workT},"Looking for a job"):s.a.createElement("div",{className:Qe.a.workF},"Already working"),s.a.createElement("div",{className:Qe.a.wrapper_description},s.a.createElement("h4",{className:Qe.a.description},e.profile.lookingForAJobDescription||"No description")),s.a.createElement("div",{className:Qe.a.links},s.a.createElement("p",null,"Links to :"),s.a.createElement("a",{href:e.profile.contacts.facebook,className:Qe.a.items},s.a.createElement("i",{className:"fa fa-facebook-square"})),s.a.createElement("a",{href:e.profile.contacts.vk,className:Qe.a.items},s.a.createElement("i",{className:"fa fa-vk"})),s.a.createElement("a",{href:e.profile.contacts.twitter,className:"".concat(Qe.a.items," ").concat(Qe.a.twit)},s.a.createElement("i",{className:"fa fa-twitter-square"})),s.a.createElement("a",{href:e.profile.contacts.instagram,className:"".concat(Qe.a.items," ").concat(Qe.a.inst)},s.a.createElement("i",{className:"fa fa-instagram"})),s.a.createElement("a",{href:e.profile.contacts.github,className:"".concat(Qe.a.items," ").concat(Qe.a.git)},s.a.createElement("i",{className:"fa fa-github-square"})))))):s.a.createElement(Ge,null)},et=a(143),tt=a.n(et),at={postsData:[{id:1,message:"Hi!This is my first post",like:3},{id:2,message:"React is cool!",like:7},{id:3,message:"So funny...",like:2},{id:4,message:"I love cats",like:5}],profile:null,status:""},nt=function(e){return{type:"SET_STATUS",status:e}},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(h.a)({},e,{postsData:[].concat(Object(E.a)(e.postsData),[{id:6,message:t.postText,like:0}])});case"SET_USER_PROFILE":return Object(h.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(h.a)({},e,{status:t.status});default:return e}},st=a(41),it=a.n(st),ot=function(e){return s.a.createElement("div",{className:it.a.item},s.a.createElement("p",{className:it.a.text},e.message),s.a.createElement("div",{className:it.a.posts},s.a.createElement("button",{className:it.a.btnLike},s.a.createElement("i",{className:"fa fa-heart"})," "),s.a.createElement("span",{className:it.a.likes},e.like),s.a.createElement("button",{className:it.a.btnComment},s.a.createElement("i",{className:"fa fa-comments"}))))},ct=a(48),lt=a.n(ct),ut=function(e){if(!e)return"Field is required"},mt=a(61),ft=a.n(mt),dt=function(e){var t=e.input,a=e.meta,n=Object(q.a)(e,["input","meta"]),r=a.touched&&a.error;return s.a.createElement("div",{className:ft.a.wrapper+" "+(r?ft.a.error:"")},s.a.createElement("input",Object.assign({},t,n,{className:ft.a.inputs__item})),r&&s.a.createElement("span",null,"Field is required"))},pt=function(e){var t=e.input,a=(e.meta,Object(q.a)(e,["input","meta"]));return s.a.createElement("input",Object.assign({className:ft.a.addNewPost,type:"text",placeholder:"This is my new post..."},t,a))},_t=(n=60,function(e){if(e&&e.length>n)return"Max length is ".concat(n," symbols")}),gt=s.a.memo(function(e){var t=e.posts.map(function(e){return s.a.createElement(ot,{id:e.id,message:e.message,like:e.like,key:e.id})});return s.a.createElement("div",{className:lt.a.wall},s.a.createElement("h2",{className:lt.a.postsHeader},"My Posts"),s.a.createElement("div",{className:lt.a.newPost},s.a.createElement(Et,{onSubmit:function(t){e.addPost(t.postText)}})),t)}),Et=Object(L.a)({form:"posts"})(function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:lt.a.form__wrapper},s.a.createElement(x.a,{name:"postText",component:pt,validate:[_t]}),s.a.createElement("button",{className:lt.a.btn},"Add post"))}),ht=gt,bt=Object(D.b)(function(e){return{posts:e.profilePage.postsData,newPostText:e.profilePage.newPostText}},function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",postText:e}}(t))}}})(ht),vt=function(e){var t=e.profile,a=e.status,n=e.updateStatus;return s.a.createElement("div",{className:tt.a.profileWall},s.a.createElement($e,{profile:t,status:a,updateStatus:n}),s.a.createElement(bt,null))},Nt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/Login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"render",value:function(){return s.a.createElement(vt,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),t}(s.a.Component),wt=Object(A.d)(Object(D.b)(function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}},{getUserProfile:function(e){return function(){var t=Object(re.a)(ne.a.mark(function t(a){var n;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(re.a)(ne.a.mark(function t(a){var n;return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce(e);case 2:n=t.sent,a(nt(n));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(re.a)(ne.a.mark(function t(a){return ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(e);case 2:0===t.sent.resultCode&&a(nt(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}),d.f)(Nt),Pt=a(49),Ot=a.n(Pt),St=function(e){return s.a.createElement("header",{className:Ot.a.header},s.a.createElement(S.b,{to:"/Profile"},s.a.createElement("div",{className:Ot.a.logo},"SocNet")),s.a.createElement("div",{className:Ot.a.login__block},e.isAuth?s.a.createElement("div",null,s.a.createElement("p",{className:Ot.a.login},e.login),s.a.createElement("p",{onClick:e.logout,className:Ot.a.logout},"Logout")):s.a.createElement(S.b,{to:"/Login"},"Login")))},kt=a(43),jt={id:null,email:null,login:null,isAuth:!1,isFetching:!1},It=function(e,t,a,n){return{type:"SET_USER_DATA",data:{id:e,email:t,login:a,isAuth:n}}},yt=function(){return function(e){return ue().then(function(t){if(0===t.resultCode){var a=t.data,n=a.id,r=a.email,s=a.login;e(It(n,r,s,!0))}})}},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(h.a)({},e,t.data);default:return e}};var Lt=Object(D.b)(function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}},{logout:function(){return function(e){fe().then(function(t){0===t.resultCode&&e(It(null,null,null,!1))})}}})(function(e){return s.a.createElement(St,e)}),Ct=a(22),Tt=a.n(Ct),Dt=Object(L.a)({form:"login"})(function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",{className:Tt.a.inputs},s.a.createElement(x.a,{type:"text",placeholder:"Email",component:dt,name:"email",className:Tt.a.inputs__item,validate:[ut]}),s.a.createElement(x.a,{type:"password",placeholder:"Password",component:dt,name:"password",className:Tt.a.inputs__item,validate:[ut]})),s.a.createElement("div",{className:Tt.a.inputs__dlc},s.a.createElement("div",{className:""},s.a.createElement(x.a,{type:"checkbox",component:"input",name:"rememberMe",className:Tt.a.check}),s.a.createElement("p",{className:Tt.a.check__text},"Remember me")),e.error&&s.a.createElement("div",{className:Tt.a.formError},e.error),s.a.createElement("div",{className:Tt.a.btn__block},s.a.createElement("button",null,"Login"))))}),Ft=Object(D.b)(function(e){return{isAuth:e.auth.isAuth}},{login:function(e,t,a){return function(n){me(e,t,a).then(function(e){if(0===e.resultCode)n(yt());else{var t=e.messages.length>0?e.messages[0]:"Some error";n(Object(kt.a)("login",{_error:t}))}})}}})(function(e){return e.isAuth?s.a.createElement(d.a,{to:"/Profile"}):s.a.createElement("div",{className:Tt.a.login},s.a.createElement("div",{className:Tt.a.login__wrapper},s.a.createElement("h1",{className:Tt.a.header},"Login"),s.a.createElement(Dt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe),console.log(t)}})))}),Ut={initialized:!1},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut;switch((arguments.length>1?arguments[1]:void 0).type){case"INITIALIZED_SUCCESS":return Object(h.a)({},e,{initialized:!0});default:return e}},Mt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?s.a.createElement("div",{className:"app__wrapper"},s.a.createElement(Lt,null),s.a.createElement(Z,null),s.a.createElement("div",{className:"app__wrapper__content"},s.a.createElement(d.b,{path:"/Profile/:userId?",render:function(){return s.a.createElement(wt,null)}}),s.a.createElement(d.b,{path:"/Dialogs",render:function(){return s.a.createElement(M,null)}}),s.a.createElement(d.b,{path:"/News",render:function(){return s.a.createElement(g,null)}}),s.a.createElement(d.b,{path:"/Music",render:function(){return s.a.createElement(g,null)}}),s.a.createElement(d.b,{path:"/Settings",render:function(){return s.a.createElement(g,null)}}),s.a.createElement(d.b,{path:"/Friends",render:function(){return s.a.createElement(Ee,null)}}),s.a.createElement(d.b,{path:"/Users",render:function(){return s.a.createElement(Ve,null)}}),s.a.createElement(d.b,{path:"/Login",render:function(){return s.a.createElement(Ft,null)}}))):s.a.createElement(Ge,null)}}]),t}(r.Component),Rt=Object(A.d)(d.f,Object(D.b)(function(e){return{initialized:e.app.initialized}},{initializeApp:function(){return function(e){var t=e(yt());Promise.all([t]).then(function(){e({type:"INITIALIZED_SUCCESS"})})}}}))(Mt),zt=a(144),Gt={friendsData:[{name:"no name 1",id:1},{name:"no name 2",id:2},{name:"no name 3",id:3}]},Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt;arguments.length>1&&arguments[1];return e},Bt=a(130),Wt=Object(A.c)({profilePage:rt,dialogsPage:v,friendsPage:_e,usersPage:ke,navBar:Ht,auth:xt,form:Bt.a,app:At}),Zt=Object(A.e)(Wt,Object(A.a)(zt.a));window.store=Zt;var Jt=Zt;o.a.render(s.a.createElement(S.a,null,s.a.createElement(D.a,{store:Jt},s.a.createElement(Rt,null))),document.getElementById("root"))},39:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__LFV1y",messages:"Dialogs_messages__2W0AS",messageList:"Dialogs_messageList__2dz1e",text:"Dialogs_text__2tNMx",btnMessage:"Dialogs_btnMessage__3QhMw"}},40:function(e,t,a){e.exports={paginator:"Paginator_paginator__1YXDE",btn:"Paginator_btn__zgI0K",selectedPage:"Paginator_selectedPage__3nGuI"}},41:function(e,t,a){e.exports={item:"Post_item__Fm3-D",posts:"Post_posts__13tbh",text:"Post_text__21gOz",likes:"Post_likes__bgNae",btnLike:"Post_btnLike__1RTz7",btnComment:"Post_btnComment__2Ntt9"}},48:function(e,t,a){e.exports={newPost:"MyPosts_newPost__2Kht7",form__wrapper:"MyPosts_form__wrapper__2gQZC",postsHeader:"MyPosts_postsHeader__fmK2D",btn:"MyPosts_btn__y58Hs",addNewPost:"MyPosts_addNewPost__dCIhH"}},49:function(e,t,a){e.exports={header:"Header_header__2Omr0",logo:"Header_logo__RwvWl",login__block:"Header_login__block__3O1UE",login:"Header_login__1fgBJ",logout:"Header_logout__1pGAU"}},59:function(e,t,a){e.exports={friendsItem:"FriendsElement_friendsItem__2gnK7",img:"FriendsElement_img__35sxm",name:"FriendsElement_name__3k5Mn",textBlock:"FriendsElement_textBlock__2uJ4M"}},60:function(e,t,a){e.exports={friendsBar:"FriendsBar_friendsBar__17Tb1",btn:"FriendsBar_btn__2amdV"}},61:function(e,t,a){e.exports={inputs__item:"FormsControls_inputs__item__M-QLw",wrapper:"FormsControls_wrapper__b6Hkk",error:"FormsControls_error__1M311",addNewPost:"FormsControls_addNewPost__3Cddx"}},75:function(e,t,a){e.exports=a.p+"static/media/avatar.fc047347.png"}},[[170,1,2]]]);
//# sourceMappingURL=main.170a0f41.chunk.js.map