(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports={menu:"Nav-menu_menu__3L28Q",item:"Nav-menu_item__TRmzC",text:"Nav-menu_text__1moLw",active:"Nav-menu_active__pE0EZ",textMod:"Nav-menu_textMod__2ZIPV",friendsList:"Nav-menu_friendsList__Ay-Gm"}},133:function(e,t,a){e.exports={music:"Music_music__3aRuc"}},134:function(e,t,a){e.exports={dialogsItem:"DialogItem_dialogsItem__2l9oA"}},136:function(e,t,a){e.exports={messagesItem:"Message_messagesItem__1dEDk"}},139:function(e,t,a){e.exports={name:"FriendsList_name__1BPJ0"}},140:function(e,t,a){},142:function(e,t,a){e.exports=a.p+"static/media/preloader.126d0665.svg"},143:function(e,t,a){e.exports={preloader:"Preloader_preloader__2kiYz"}},144:function(e,t,a){e.exports={profileWall:"Profile_profileWall__2HIIM"}},15:function(e,t,a){e.exports={infoImage:"ProfileInfo_infoImage__2MYjA",info:"ProfileInfo_info__2Z1a8",profileInfo:"ProfileInfo_profileInfo__2qPLI",profileHeader:"ProfileInfo_profileHeader__1lNVn",workT:"ProfileInfo_workT__1aHeN",workF:"ProfileInfo_workF__T4LLt",wrapper_description:"ProfileInfo_wrapper_description__24rTc",description:"ProfileInfo_description__21j6x",links:"ProfileInfo_links__3gErd",items:"ProfileInfo_items__2gy0w",twit:"ProfileInfo_twit__1ZaXs",git:"ProfileInfo_git__3xjB-",inst:"ProfileInfo_inst__30u4d",editProfile:"ProfileInfo_editProfile__2AAKj",wrapper:"ProfileInfo_wrapper__3-Zn2",about:"ProfileInfo_about__UhIZ8"}},170:function(e,t,a){e.exports=a(296)},175:function(e,t,a){},20:function(e,t,a){e.exports={usersContainer:"Users_usersContainer__1Zald",ava:"Users_ava__1MOW0",name:"Users_name__3DncU",btn:"Users_btn__3cGDy",btnFoll:"Users_btnFoll__261Tm",btnUfoll:"Users_btnUfoll__25T7v",usersList:"Users_usersList__1kpCl"}},22:function(e,t,a){e.exports={login:"Login_login__KI_eC",login__wrapper:"Login_login__wrapper__1AK6g",header:"Login_header__2hL0z",inputs__item:"Login_inputs__item__3akre",inputs__dlc:"Login_inputs__dlc__2ufvb",check__text:"Login_check__text__1ZUyN",btn__block:"Login_btn__block__2hTaf",formError:"Login_formError__EH2pB"}},296:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),o=a(73),i=a.n(o),l=a(27),c=a(28),u=a(30),m=a(29),f=a(31),p=a(38),d=(a(175),a(133)),_=a.n(d),g=function(){return s.a.createElement("div",{className:_.a.music},"Not yet available :(")},E=g,b=a(77),h=a(10),v={messagesData:[{id:1,message:"Hi"},{id:3,message:"Yop"},{id:4,message:"kek"},{id:6,message:"pipi"},{id:7,message:"piupiu"}],dialogsData:[{id:1,name:"Anna"},{id:2,name:"Boris"},{id:3,name:"Dasha"},{id:4,name:"Robert"},{id:5,name:"Sasha"},{id:6,name:"Sveta"},{id:7,name:"Valera"}]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-NEW-MESSAGE":return Object(h.a)({},e,{messagesData:[].concat(Object(b.a)(e.messagesData),[{id:8,message:t.message}])});default:return e}},P=a(43),w=a.n(P),O=a(134),j=a.n(O),S=a(9),k=function(e){var t="/dialogs/".concat(e.id);return s.a.createElement("div",{className:j.a.dialogsItem},s.a.createElement(S.b,{to:t},e.name))},I=a(136),y=a.n(I),x=function(e){return s.a.createElement("div",{className:y.a.messagesItem},e.message)},C=a(130),L=a(131),F=Object(L.a)({form:"message"})(function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",{className:w.a.text},s.a.createElement(C.a,{name:"message",component:"input",type:"text",placeholder:"Type your message..."})),s.a.createElement("button",{className:w.a.btnMessage},"Send"))}),D=function(e){var t=e.dialogsPage,a=t.dialogsData.map(function(e){return s.a.createElement(k,{id:e.id,name:e.name,key:e.id})}),n=t.messagesData.map(function(e){return s.a.createElement(x,{id:e.id,message:e.message,key:e.id})});return s.a.createElement("div",{className:w.a.dialogs},s.a.createElement("div",{className:w.a.dialogsList},a),s.a.createElement("div",{className:w.a.messages},s.a.createElement("div",{className:w.a.messageList},n),s.a.createElement(F,{state:t,onSubmit:function(t){e.sendMessage(t.message)}})))},T=a(8),A=function(e){return{isAuth:e.auth.isAuth}},U=function(e){var t=function(t){function a(){return Object(l.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(f.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){return this.props.isAuth?s.a.createElement(e,this.props):s.a.createElement(p.a,{to:"/Login"})}}]),a}(s.a.Component);return Object(T.b)(A)(t)},M=a(6),R=Object(M.d)(Object(T.b)(function(e){return{dialogsPage:e.dialogsPage}},function(e){return{sendMessage:function(t){e(function(e){return{type:"ADD-NEW-MESSAGE",message:e}}(t))}}}),U)(D),z=a(11),H=a.n(z),G=a(139),W=a.n(G),B=function(e){return s.a.createElement("div",{className:W.a.name},e.name)},J=function(e){var t=e.friendsList.map(function(e){return s.a.createElement(B,{name:e.name,key:e.id,id:e.id})});return s.a.createElement("nav",{className:H.a.menu},s.a.createElement("ul",{className:H.a.listItem},s.a.createElement("li",{className:H.a.item},s.a.createElement(S.b,{to:"/Profile",className:H.a.text,activeClassName:H.a.active},"Profile")),s.a.createElement("li",{className:H.a.item},s.a.createElement(S.b,{to:"/Dialogs",className:H.a.text,activeClassName:H.a.active},"Messages")),s.a.createElement("li",{className:H.a.item},s.a.createElement(S.b,{to:"/News",className:H.a.text,activeClassName:H.a.active},"News")),s.a.createElement("li",{className:H.a.item},s.a.createElement(S.b,{to:"/Music",className:H.a.text,activeClassName:H.a.active},"Music")),s.a.createElement("li",{className:H.a.item},s.a.createElement(S.b,{to:"/Settings",className:H.a.text,activeClassName:H.a.active},"Settings")),s.a.createElement("li",{className:H.a.item},s.a.createElement(S.b,{to:"/Friends",className:"".concat(H.a.text," ").concat(H.a.textMod),activeClassName:H.a.active},"Friends"),s.a.createElement("div",{className:H.a.friendsList},t))))},Z=Object(T.b)(function(e){return{friendsList:e.navBar.friendsData}})(J),K=a(140),V=a.n(K),Q=a(53),Y=a(54),q=a.n(Y),X=a(52),$=a.n(X),ee=function(e){var t=e.followed,a=e.id,n=e.photos,r=Object(Q.a)(e,["followed","id","photos"]);return t?s.a.createElement("div",{className:q.a.friendsItem},s.a.createElement("div",{className:q.a.img}," ",s.a.createElement(S.b,{to:"/Profile/"+a},s.a.createElement("img",{src:null!=n?n:$.a,alt:"avatar",className:q.a.ava}))),s.a.createElement("div",{className:q.a.textBlock},s.a.createElement("div",{className:q.a.name,id:r.id},r.name),s.a.createElement(S.b,{to:"/Dialogs"},"Write message..."))):null},te=a(64),ae=a.n(te),ne=function(e){return s.a.createElement("div",{className:ae.a.friendsBar},s.a.createElement("div",{className:ae.a.online},s.a.createElement("p",null,"Friends online : ",s.a.createElement("span",null,"0"))),s.a.createElement("div",{className:ae.a.search},s.a.createElement(S.b,{to:"/Users"}," ",s.a.createElement("button",{className:ae.a.btn},"Find users"))))},re=function(e){var t=e.friendsList.map(function(e){return s.a.createElement(ee,{name:e.name,id:e.id,key:e.id,followed:e.followed,photos:e.photos.small})});return s.a.createElement("div",{className:V.a.friendsPage},s.a.createElement(ne,null),t)},se=a(12),oe=a.n(se),ie=a(23),le=a(141).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"209e1589-c8e1-4114-9e39-f42219060211"}}),ce={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return le.get("users?count=".concat(e,"&&page=").concat(t)).then(function(e){return e.data})},followUsers:function(e){return le.post("follow/".concat(e)).then(function(e){return e.data})},unfollowUsers:function(e){return le.delete("follow/".concat(e)).then(function(e){return e.data})}},ue=function(e){return le.get("profile/".concat(e)).then(function(e){return e.data})},me=function(e){return le.get("profile/status/".concat(e)).then(function(e){return e.data})},fe=function(e){return le.put("profile/status",{status:e}).then(function(e){return e.data})},pe=function(e){var t=new FormData;return t.append("image",e),le.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},de=function(e){return le.put("profile",e).then(function(e){return e.data})},_e=function(){return le.get("auth/me").then(function(e){return e.data})},ge=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return le.post("auth/login",{email:e,password:t,rememberMe:a}).then(function(e){return e.data})},Ee=function(){return le.delete("auth/login").then(function(e){return e.data})},be=function(){return le.get("users?count=100").then(function(e){return e.data})},he={friendsList:[]},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FRIENDS":return Object(h.a)({},e,{friendsList:t.friendsList});default:return e}},Ne=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.addFriends()}},{key:"render",value:function(){return s.a.createElement(re,this.props)}}]),t}(s.a.Component),Pe=Object(M.d)(U,Object(T.b)(function(e){return{friendsList:e.friendsPage.friendsList}},{addFriends:function(){return function(){var e=Object(ie.a)(oe.a.mark(function e(t){var a;return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:a=e.sent,t({type:"SET_FRIENDS",friendsList:a.items});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}))(Ne),we=function(e,t,a,n){return e.map(function(e){return e[a]===t?Object(h.a)({},e,n):e})},Oe={usersData:[],pageSize:8,totalCount:1,currentPage:1,isFetching:!1,followingInProgress:[]},je=function(e){return{type:"FOLLOW",userId:e}},Se=function(e){return{type:"UNFOLLOW",userId:e}},ke=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},Ie=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},ye=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,id:t}},xe=function(){var e=Object(ie.a)(oe.a.mark(function e(t,a,n,r){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:0===e.sent.resultCode&&t(r(a)),t(ye(!1,a));case 5:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(h.a)({},e,{usersData:we(e.usersData,t.userId,"id",{followed:!0})});case"UNFOLLOW":return Object(h.a)({},e,{usersData:we(e.usersData,t.userId,"id",{followed:!1})});case"SET_USERS":return Object(h.a)({},e,{usersData:t.usersData});case"SET_CURRENT_PAGE":return Object(h.a)({},e,{currentPage:t.currentPage});case"SET_USERS_TOTAL_COUNT":return Object(h.a)({},e,{totalCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(h.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(h.a)({},e,{followingInProgress:t.isFetching?[e.followingInProgress,t.id]:e.followingInProgress.filter(function(e){return e!==t.id})});default:return e}},Le=a(20),Fe=a.n(Le),De=function(e){var t=e.user,a=e.followingInProgress,n=e.unfollow,r=e.follow;return s.a.createElement("div",null,s.a.createElement("div",{className:Fe.a.usersList,id:t.id,key:t.id},s.a.createElement(S.b,{to:"/Profile/"+t.id},s.a.createElement("img",{src:null!=t.photos.small?t.photos.small:$.a,alt:"avatar",className:Fe.a.ava})),s.a.createElement("div",{className:Fe.a.wrapper},s.a.createElement("div",{className:Fe.a.info},s.a.createElement("div",{className:Fe.a.name},t.name)),s.a.createElement("div",null,t.followed?s.a.createElement("button",{disabled:a.some(function(e){return e===t.id}),className:"".concat(Fe.a.btn," ").concat(Fe.a.btnUfoll),onClick:function(){n(t.id)}},"Unfollow"):s.a.createElement("button",{disabled:a.some(function(e){return e===t.id}),className:"".concat(Fe.a.btn," ").concat(Fe.a.btnFoll),onClick:function(){r(t.id)}},"Follow")))))},Te=a(42),Ae=a(44),Ue=a.n(Ae),Me=function(e){for(var t=e.totalCount,a=e.pageSize,n=e.currentPage,o=e.onPageChanged,i=e.portionSize,l=void 0===i?5:i,c=Math.ceil(t/a),u=[],m=1;m<=c;m++)u.push(m);var f=Math.ceil(c/l),p=Object(r.useState)(1),d=Object(Te.a)(p,2),_=d[0],g=d[1],E=(_-1)*l+1,b=_*l;return s.a.createElement("div",{className:Ue.a.paginator},_>2&&s.a.createElement("button",{className:Ue.a.btn,onClick:function(){return g(_=1)}},"Start"),_>1&&s.a.createElement("button",{className:Ue.a.btn,onClick:function(){return g(_-1)}},"Prev"),u.filter(function(e){return e>=E&&e<=b}).map(function(e){return s.a.createElement("div",null,s.a.createElement("span",{className:n===e&&Ue.a.selectedPage,onClick:function(){o(e)}},e))}),f>_&&s.a.createElement("button",{className:Ue.a.btn,onClick:function(){return g(_+1)}},"Next"),f>_+1&&s.a.createElement("button",{className:Ue.a.btn,onClick:function(){return g(_=f)}},"End"))},Re=function(e){var t=e.usersPage,a=e.followingInProgress,n=e.follow,r=e.unfollow,o=e.currentPage,i=e.onPageChanged,l=e.pageSize,c=e.totalCount,u=t.map(function(e){return s.a.createElement(De,{user:e,followingInProgress:a,unfollow:r,follow:n})});return s.a.createElement("div",null,s.a.createElement(Me,{currentPage:o,onPageChanged:i,pageSize:l,totalCount:c}),s.a.createElement("div",{className:Fe.a.usersContainer},u))},ze=a(142),He=a.n(ze),Ge=a(143),We=a.n(Ge),Be=function(e){return s.a.createElement("div",{className:We.a.preloader},s.a.createElement("img",{src:He.a,alt:"Loading..."}))},Je=function(e){return e.usersPage.usersData},Ze=function(e){return e.usersPage.pageSize},Ke=function(e){return e.usersPage.totalCount},Ve=function(e){return e.usersPage.currentPage},Qe=function(e){return e.usersPage.isFetching},Ye=function(e){return e.usersPage.followingInProgress},qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){a.props.getUsers(a.props.pageSize,e)},a}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.pageSize,this.props.currentPage)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.props.isFetching?s.a.createElement(Be,null):null,s.a.createElement(Re,{currentPage:this.props.currentPage,totalCount:this.props.totalCount,pageSize:this.props.pageSize,usersPage:this.props.usersPage,onPageChanged:this.onPageChanged,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress}))}}]),t}(s.a.Component),Xe=Object(T.b)(function(e){return{usersPage:Je(e),pageSize:Ze(e),totalCount:Ke(e),currentPage:Ve(e),isFetching:Qe(e),followingInProgress:Ye(e)}},{follow:function(e){return function(t){xe(t,e,ce.followUsers.bind(ce),je)}},unfollow:function(e){return function(t){xe(t,e,ce.unfollowUsers.bind(ce),Se)}},setCurrentPage:ke,toggleFollowingProgress:ye,getUsers:function(e,t){return function(){var a=Object(ie.a)(oe.a.mark(function a(n){var r;return oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(Ie(!0)),n(ke(t)),a.next=4,ce.getUsers(e,t);case 4:r=a.sent,n(Ie(!1)),n({type:"SET_USERS",usersData:r.items}),n({type:"SET_USERS_TOTAL_COUNT",totalCount:r.totalCount});case 8:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}})(qe),$e=a(15),et=a.n($e),tt=function(e){var t=Object(r.useState)(!1),a=Object(Te.a)(t,2),n=a[0],o=a[1],i=Object(r.useState)(e.status),l=Object(Te.a)(i,2),c=l[0],u=l[1];Object(r.useEffect)(function(){u(e.status)},[e.status]);return s.a.createElement("div",null,!n&&s.a.createElement("div",null,s.a.createElement("span",{onDoubleClick:e.isOwner?function(){o(!0)}:null},e.status||"No status")),n&&s.a.createElement("div",null,s.a.createElement("input",{type:"text",autoFocus:!0,onBlur:function(){o(!1),e.updateStatus(c)},value:c,onChange:function(e){u(e.currentTarget.value)}})))},at=function(e){var t=e.contacts,a=Object.keys(t).map(function(e){return null===t[e]?null:s.a.createElement("a",{href:t[e],key:e,className:et.a.items,target:"_blank"},e)});return s.a.createElement("div",{className:et.a.links},s.a.createElement("p",null,"\u0421ontacts :"),a)},nt=function(e){return s.a.createElement("div",{className:et.a.wrapper},e.isOwner&&s.a.createElement("div",null,s.a.createElement("button",{className:et.a.editProfile,onClick:e.goToEditMode},"Edit profile")),s.a.createElement("h3",{className:et.a.profileHeader},e.profile.fullName),s.a.createElement(tt,{status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner}),s.a.createElement("div",null,s.a.createElement("h4",{className:et.a.about},"About me :"),s.a.createElement("p",null,e.profile.aboutMe)),e.profile.lookingForAJob?s.a.createElement("div",{className:et.a.workT},"Looking for a job"):s.a.createElement("div",{className:et.a.workF},"Already working"),s.a.createElement("div",{className:et.a.wrapper_description},s.a.createElement("h4",{className:et.a.description},e.profile.lookingForAJobDescription||"No description")),s.a.createElement(at,e.profile))},rt=a(32),st=a.n(rt),ot=a(129),it=a(55),lt=a.n(it),ct=function(e){var t=e.input,a=e.meta,n=Object(Q.a)(e,["input","meta"]),r=a.touched&&a.error;return s.a.createElement("div",{className:lt.a.wrapper+" "+(r?lt.a.error:"")},s.a.createElement("input",Object.assign({},t,n,{className:lt.a.inputs__item})),r&&s.a.createElement("span",null,"Field is required"))},ut=function(e){var t=e.input,a=Object(Q.a)(e,["input"]);return s.a.createElement("input",Object.assign({},t,a,{className:lt.a.inputsProfile}))},mt=function(e){var t=e.input,a=(e.meta,Object(Q.a)(e,["input","meta"]));return s.a.createElement("input",Object.assign({className:lt.a.addNewPost,type:"text",placeholder:"This is my new post..."},t,a))},ft=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return s.a.createElement("div",null,s.a.createElement(C.a,Object.assign({placeholder:e,name:t,validate:a,component:n},r))," ",o)},pt=Object(L.a)({form:"edit-profile"})(function(e){return s.a.createElement(ot.a,{onSubmit:e.handleSubmit},s.a.createElement("div",{className:st.a.btnWrapper},s.a.createElement("button",{className:st.a.btn},"Save changes")),s.a.createElement("div",{className:st.a.wrapperName},s.a.createElement("b",null,"Full name:"),ft("fullName","fullName",[],ut)),s.a.createElement("div",{className:st.a.wrapperName},s.a.createElement("b",null,"Looking For A Job :"),s.a.createElement("div",{className:st.a.check},ft("","lookingForAJob",[],"input",{type:"checkbox"}))),s.a.createElement("div",null,s.a.createElement("b",null,"lookingForAJobDescription : "),s.a.createElement("div",{className:st.a.wrapperAll},ft("lookingForAJobDescription me","lookingForAJobDescription",[],ut))),s.a.createElement("div",null,s.a.createElement("b",null,"About me : "),s.a.createElement("div",{className:st.a.wrapperAll},ft("About me","aboutMe",[],ut))),Object.keys(e.contacts).map(function(e){return s.a.createElement("div",null,s.a.createElement("b",null,e," : "),s.a.createElement("div",{className:st.a.wrapperAll},ft(e,"contacts."+e,[],ut)))}))}),dt=function(e){var t=Object(r.useState)(!1),a=Object(Te.a)(t,2),n=a[0],o=a[1];if(!e.profile)return s.a.createElement(Be,null);return s.a.createElement("div",null,s.a.createElement("div",{className:et.a.info},s.a.createElement("div",{className:et.a.infoImage},s.a.createElement("img",{src:null!=e.profile.photos.large?e.profile.photos.large:$.a,alt:""}),e.isOwner&&s.a.createElement("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}})),s.a.createElement("div",{className:et.a.profileInfo},n?s.a.createElement(pt,Object.assign({initialValues:e.profile},e.profile,{onSubmit:function(t){e.saveProfile(t),o(!1)}})):s.a.createElement(nt,Object.assign({goToEditMode:function(){o(!0)}},e)))))},_t=a(144),gt=a.n(_t),Et={postsData:[{id:1,message:"Hi!This is my first post",like:3},{id:2,message:"React is cool!",like:7},{id:3,message:"So funny...",like:2},{id:4,message:"I love cats",like:5}],profile:null,status:""},bt=function(e){return{type:"SET_STATUS",status:e}},ht=function(e){return function(){var t=Object(ie.a)(oe.a.mark(function t(a){var n;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":return Object(h.a)({},e,{postsData:[].concat(Object(b.a)(e.postsData),[{id:6,message:t.postText,like:0}])});case"SET_USER_PROFILE":return Object(h.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(h.a)({},e,{status:t.status});case"SET_PHOTO":return Object(h.a)({},e,{profile:Object(h.a)({},e.profile,{photos:t.photos})});default:return e}},Nt=a(45),Pt=a.n(Nt),wt=function(e){return s.a.createElement("div",{className:Pt.a.item},s.a.createElement("p",{className:Pt.a.text},e.message),s.a.createElement("div",{className:Pt.a.posts},s.a.createElement("button",{className:Pt.a.btnLike},s.a.createElement("i",{className:"fa fa-heart"})," "),s.a.createElement("span",{className:Pt.a.likes},e.like),s.a.createElement("button",{className:Pt.a.btnComment},s.a.createElement("i",{className:"fa fa-comments"}))))},Ot=a(56),jt=a.n(Ot),St=function(e){if(!e)return"Field is required"},kt=(n=60,function(e){if(e&&e.length>n)return"Max length is ".concat(n," symbols")}),It=s.a.memo(function(e){var t=e.posts.map(function(e){return s.a.createElement(wt,{id:e.id,message:e.message,like:e.like,key:e.id})});return s.a.createElement("div",{className:jt.a.wall},s.a.createElement("h2",{className:jt.a.postsHeader},"My Posts"),s.a.createElement("div",{className:jt.a.newPost},s.a.createElement(yt,{onSubmit:function(t){e.addPost(t.postText)}})),t)}),yt=Object(L.a)({form:"posts"})(function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit,className:jt.a.form__wrapper},s.a.createElement(C.a,{name:"postText",component:mt,validate:[kt]}),s.a.createElement("button",{className:jt.a.btn},"Add post"))}),xt=It,Ct=Object(T.b)(function(e){return{posts:e.profilePage.postsData,newPostText:e.profilePage.newPostText}},function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",postText:e}}(t))}}})(xt),Lt=function(e){var t=e.profile,a=e.status,n=e.updateStatus,r=e.isOwner,o=e.savePhoto,i=e.saveProfile;return s.a.createElement("div",{className:gt.a.profileWall},s.a.createElement(dt,{profile:t,status:a,updateStatus:n,isOwner:r,savePhoto:o,saveProfile:i}),s.a.createElement(Ct,null))},Ft=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/Login"),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return s.a.createElement(Lt,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),t}(s.a.Component),Dt=Object(M.d)(Object(T.b)(function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.id,isAuth:e.auth.isAuth}},{getUserProfile:ht,getUserStatus:function(e){return function(){var t=Object(ie.a)(oe.a.mark(function t(a){var n;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me(e);case 2:n=t.sent,a(bt(n));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(ie.a)(oe.a.mark(function t(a){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fe(e);case 2:0===t.sent.resultCode&&a(bt(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(ie.a)(oe.a.mark(function t(a){var n;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe(e);case 2:0===(n=t.sent).resultCode&&a({type:"SET_PHOTO",photos:n.data.photos});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(ie.a)(oe.a.mark(function t(a,n){var r;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.id,t.next=3,de(e);case 3:0===t.sent.resultCode&&a(ht(r));case 5:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}}),p.f)(Ft),Tt=a(57),At=a.n(Tt),Ut=function(e){return s.a.createElement("header",{className:At.a.header},s.a.createElement(S.b,{to:"/Profile"},s.a.createElement("div",{className:At.a.logo},"SocNet")),s.a.createElement("div",{className:At.a.login__block},e.isAuth?s.a.createElement("div",null,s.a.createElement("p",{className:At.a.login},e.login),s.a.createElement("p",{onClick:e.logout,className:At.a.logout},"Logout")):s.a.createElement(S.b,{to:"/Login"},"Login")))},Mt=a(35),Rt={id:null,email:null,login:null,isAuth:!1,isFetching:!1},zt=function(e,t,a,n){return{type:"SET_USER_DATA",data:{id:e,email:t,login:a,isAuth:n}}},Ht=function(){return function(e){return _e().then(function(t){if(0===t.resultCode){var a=t.data,n=a.id,r=a.email,s=a.login;e(zt(n,r,s,!0))}})}},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(h.a)({},e,t.data);default:return e}};var Wt=Object(T.b)(function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}},{logout:function(){return function(e){Ee().then(function(t){0===t.resultCode&&e(zt(null,null,null,!1))})}}})(function(e){return s.a.createElement(Ut,e)}),Bt=a(22),Jt=a.n(Bt),Zt=Object(L.a)({form:"login"})(function(e){return s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("div",{className:Jt.a.inputs},s.a.createElement(C.a,{type:"text",placeholder:"Email",component:ct,name:"email",className:Jt.a.inputs__item,validate:[St]}),s.a.createElement(C.a,{type:"password",placeholder:"Password",component:ct,name:"password",className:Jt.a.inputs__item,validate:[St]})),s.a.createElement("div",{className:Jt.a.inputs__dlc},s.a.createElement("div",{className:""},s.a.createElement(C.a,{type:"checkbox",component:"input",name:"rememberMe",className:Jt.a.check}),s.a.createElement("p",{className:Jt.a.check__text},"Remember me")),e.error&&s.a.createElement("div",{className:Jt.a.formError},e.error),s.a.createElement("div",{className:Jt.a.btn__block},s.a.createElement("button",null,"Login"))))}),Kt=Object(T.b)(function(e){return{isAuth:e.auth.isAuth}},{login:function(e,t,a){return function(n){ge(e,t,a).then(function(e){if(0===e.resultCode)n(Ht());else{var t=e.messages.length>0?e.messages[0]:"Some error";n(Object(Mt.a)("login",{_error:t}))}})}}})(function(e){return e.isAuth?s.a.createElement(p.a,{to:"/Profile"}):s.a.createElement("div",{className:Jt.a.login},s.a.createElement("div",{className:Jt.a.login__wrapper},s.a.createElement("h1",{className:Jt.a.header},"Login"),s.a.createElement(Zt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})))}),Vt={initialized:!1},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt;switch((arguments.length>1?arguments[1]:void 0).type){case"INITIALIZED_SUCCESS":return Object(h.a)({},e,{initialized:!0});default:return e}},Yt=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?s.a.createElement("div",{className:"app__wrapper"},s.a.createElement(Wt,null),s.a.createElement(Z,null),s.a.createElement("div",{className:"app__wrapper__content"},s.a.createElement(p.b,{path:"/Profile/:userId?",render:function(){return s.a.createElement(Dt,null)}}),s.a.createElement(p.b,{path:"/Dialogs",render:function(){return s.a.createElement(R,null)}}),s.a.createElement(p.b,{path:"/News",render:function(){return s.a.createElement(E,null)}}),s.a.createElement(p.b,{path:"/Music",render:function(){return s.a.createElement(E,null)}}),s.a.createElement(p.b,{path:"/Settings",render:function(){return s.a.createElement(E,null)}}),s.a.createElement(p.b,{path:"/Friends",render:function(){return s.a.createElement(Pe,null)}}),s.a.createElement(p.b,{path:"/Users",render:function(){return s.a.createElement(Xe,null)}}),s.a.createElement(p.b,{path:"/Login",render:function(){return s.a.createElement(Kt,null)}}))):s.a.createElement(Be,null)}}]),t}(r.Component),qt=Object(M.d)(p.f,Object(T.b)(function(e){return{initialized:e.app.initialized}},{initializeApp:function(){return function(e){var t=e(Ht());Promise.all([t]).then(function(){e({type:"INITIALIZED_SUCCESS"})})}}}))(Yt),Xt=a(145),$t={friendsData:[{name:"no name 1",id:1},{name:"no name 2",id:2},{name:"no name 3",id:3}]},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t;arguments.length>1&&arguments[1];return e},ta=a(132),aa=Object(M.c)({profilePage:vt,dialogsPage:N,friendsPage:ve,usersPage:Ce,navBar:ea,auth:Gt,form:ta.a,app:Qt}),na=Object(M.e)(aa,Object(M.a)(Xt.a));window.store=na;var ra=na;i.a.render(s.a.createElement(S.a,null,s.a.createElement(T.a,{store:ra},s.a.createElement(qt,null))),document.getElementById("root"))},32:function(e,t,a){e.exports={wrapperName:"ProfileDataForm_wrapperName__2WqrI",check:"ProfileDataForm_check__abxUv",wrapperAll:"ProfileDataForm_wrapperAll__1zbcJ",btn:"ProfileDataForm_btn__3RIMQ",btnWrapper:"ProfileDataForm_btnWrapper__3sy9V"}},43:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__LFV1y",messages:"Dialogs_messages__2W0AS",messageList:"Dialogs_messageList__2dz1e",text:"Dialogs_text__2tNMx",btnMessage:"Dialogs_btnMessage__3QhMw"}},44:function(e,t,a){e.exports={paginator:"Paginator_paginator__1YXDE",btn:"Paginator_btn__zgI0K",selectedPage:"Paginator_selectedPage__3nGuI"}},45:function(e,t,a){e.exports={item:"Post_item__Fm3-D",posts:"Post_posts__13tbh",text:"Post_text__21gOz",likes:"Post_likes__bgNae",btnLike:"Post_btnLike__1RTz7",btnComment:"Post_btnComment__2Ntt9"}},52:function(e,t,a){e.exports=a.p+"static/media/avatar.fc047347.png"},54:function(e,t,a){e.exports={friendsItem:"FriendsElement_friendsItem__2gnK7",img:"FriendsElement_img__35sxm",name:"FriendsElement_name__3k5Mn",textBlock:"FriendsElement_textBlock__2uJ4M"}},55:function(e,t,a){e.exports={inputs__item:"FormsControls_inputs__item__M-QLw",wrapper:"FormsControls_wrapper__b6Hkk",error:"FormsControls_error__1M311",addNewPost:"FormsControls_addNewPost__3Cddx",inputsProfile:"FormsControls_inputsProfile__t_jBj"}},56:function(e,t,a){e.exports={newPost:"MyPosts_newPost__2Kht7",form__wrapper:"MyPosts_form__wrapper__2gQZC",postsHeader:"MyPosts_postsHeader__fmK2D",btn:"MyPosts_btn__y58Hs",addNewPost:"MyPosts_addNewPost__dCIhH"}},57:function(e,t,a){e.exports={header:"Header_header__2Omr0",logo:"Header_logo__RwvWl",login__block:"Header_login__block__3O1UE",login:"Header_login__1fgBJ",logout:"Header_logout__1pGAU"}},64:function(e,t,a){e.exports={friendsBar:"FriendsBar_friendsBar__17Tb1",btn:"FriendsBar_btn__2amdV"}}},[[170,1,2]]]);
//# sourceMappingURL=main.8c79461a.chunk.js.map